{%extends 'base.html'%}
{%load static %}
{%load crispy_forms_tags static%}

{% block extra_css%}
    <link rel="stylesheet" type="" href="{%static 'css/design_stocks_movement/design_stocks_movement.css'%}">
{%endblock%}

{%block content%}


        {%if user.is_authenticated%}
    <div class="container mt-5">
         <h2 class="text-center mb-4 fw-bold text-primary">
            THE TOTAL Stocks in Inventory: {{total_quantity}}
         </h2>

            <h4 class="text-center mb-4 text-secondary">Stocks Movement</h4>
         <div class="table-responsive shadow-sm rounded">


                        <table class="table table-striped table-hover align-middle text-center">
                            <thead class="table-primary">
                            <tr>
                                <th>Product ID</th>
                                <th>Product Name</th>
                                <th>Total Count</th>
                                <th>Supplier</th>
                                <th>Date of Arrival</th>
                                <th>Image</th>
                                <th>Price per pc</th>
                                <th>Total Sum</th>

                            </tr>
                            </thead>

                            <tbody>
                           {% for stock in page_obj%}
                                <tr>

                                    <td>{{ stock.product.product_id }}</td>
                                    <td class="fw-semibold">{{ stock.product.product_name }}</td>
                                    <td>{{ stock.product.quantity }}</td>
                                    <td>{{ stock.supplier }}</td>
                                    <td>{{ stock.product.transaction_date }}</td>
                                    <td>
                                        {% if stock.product.product_image %}
                                            <img src="{{ stock.product.product_image.url }}"
                                                 class="img-thumbnail"
                                                 style="width: 60px; height: 60px; object-fit: cover;">
                                        {% else %}
                                            <span class="text-muted fst-italic">No image</span>
                                        {% endif %}
                                    </td>
                                    <td>₱{{ stock.product.price }}</td>
                                    <td class="fw-bold text-success">₱{{ stock.total_price }}</td>
                                    <!---
                                     <td>{{stock.product.product_id}}</td>
                                     <td>{{ stock.product.product_name }}</td>
                                    <td>{{stock.product.quantity}} ACTUAL count of Product</td>
                                    <td>{{stock.supplier}}</td>
                                    <td>{{stock.product.transaction_date}}</td>
                                      <td> {% if stock.product.product_image %}
                                     <img src="{{ stock.product.product_image.url }}" width="20%" height="40%" class="img-fluid rounded-start" alt="...">
                                   {% else %}
                                      <p>No image available for {{ stock.product.product_name }}</p>
                                     {% endif %}</td>

                                    <td>{{stock.product.price}}</td>

                                    <td>{{stock.total_price}}</td>
                                     -->

                                </tr>
                           {%endfor%}
                            </tbody>
                        </TABLE>


             <div class="pagination-container d-flex justify-content-center mt-4">
    <nav aria-label="Page navigation">
        <ul class="pagination shadow-sm">

            {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1">« First</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}">‹ Prev</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link">« First</span>
                </li>
                <li class="page-item disabled">
                    <span class="page-link">‹ Prev</span>
                </li>
            {% endif %}

            <li class="page-item active">
                <span class="page-link">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                </span>
            </li>

            {% if page_obj.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next ›</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last »</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link">Next ›</span>
                </li>
                <li class="page-item disabled">
                    <span class="page-link">Last »</span>
                </li>
            {% endif %}
        </ul>
    </nav>
</div>



            <!--
               <div class="pagination">
                {%if page_obj.has_previous%}
                <a href="?page1">First Page</a>
                <a href="?page={{page_obj.previous_page_number}}">Previous</a>
                {%endif%}
                <span>Page {{page_obj.number}} of {{page_obj.paginator.number_pages}}</span>
                {%if page_obj.has_next%}
                <a href="?page={{page_obj.next_page_number}}">Next</a>
                <a href="?page={{page_obj.paginator.number_pages}}">Last</a>
                {%endif%}
            </div>
            -->


        </div>
    </div>
        {%else%}
             <h1>You MUST log in</h1>
        {%endif%}


{%endblock%}